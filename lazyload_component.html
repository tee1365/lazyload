<!DOCTYPE html>

<html>

<head>
  <script src="https://code.jquery.com/jquery-3.3.1.js" integrity="sha256-2Kok7MbOyxpgUVvAk/HJ2jigOSYS2auK4Pfzbm7uH60=" crossorigin="anonymous"></script>

  <meta charset="utf-8">
  <title></title>
  <style>
    ul,
    li {
      list-style: none;
    }

    .container {
      max-width: 800px;
      margin: 0 auto;\

    }

    .container:after {
      content: '';
      display: block;
      clear: both;
    }

    .container li {
      float: left;
      margin: 10px 10px;
      width: 350px;
      height: 300px;
    }

    .container a img {
      max-width: 100%;
      max-height: 100%;
    }

    p {
      float: left;
    }
  </style>

</head>

<body>
  <ul class="container">
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1503640538573-148065ba4904?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=07c73b2d07218491dacf8511f3ee79e3&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1465414951857-102134ffaa57?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=90e9feaf6e61c61f64f444ac52b606ed&auto=format&fit=crop&w=1053&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1477520353136-d75b998f342f?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=77354021928dbd71be5fe33f57721e0e&auto=format&fit=crop&w=1950&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1503933166348-a1a86c17b3a0?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=625fe6fd55bfcc756490582ae368b210&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1485774043635-d42ceede5758?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=74a601135b20a2da7e40325945effa5b&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1513092907274-a337201e3210?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=00dfe0ffeeee4672bbf2fab1eab2a6b9&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1513092907274-a337201e3210?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=00dfe0ffeeee4672bbf2fab1eab2a6b9&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1519800521611-c47d4ea364ca?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=5f34d69c5e2e65195749f55294766640&auto=format&fit=crop&w=1189&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1520637438573-ee1ba80b2a7f?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=c52361bf4d8fd6557567685a0bb41a59&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1484902247933-853844bda37a?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=ed9fee96b17e5c5aef53ae6c985f0022&auto=format&fit=crop&w=1053&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1483729558449-99ef09a8c325?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=ec23000300013938b7094a2e14398585&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1503187680590-525b6e7a793f?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=1cf101b1c1b455c8571a3fac15d03339&auto=format&fit=crop&w=966&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1483519915753-2ace655a51e5?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=ed5eb26267f7579976b3d8ab1224e775&auto=format&fit=crop&w=967&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1517162089003-1c569ea81187?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=ee042881c1e0125ab8c3278d83d953f3&auto=format&fit=crop&w=1051&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1438955185657-797f29aeaea8?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=736daac70975c507e67e7c8bf5589c08&auto=format&fit=crop&w=1050&q=80" /></a></li>
    <li><a href="#"><img src="https://i.imgur.com/Eq09HV8.jpg" data-src="https://images.unsplash.com/photo-1491252476179-5f2566566ab8?ixlib=rb-0.3.5&ixid=eyJhcHBfaWQiOjEyMDd9&s=1a07605049d70a7edf3ea7a052d5db8d&auto=format&fit=crop&w=1189&q=80" /></a></li>
    <p id="hello">hello</p>
    <p id="world">world</p>
  </ul>

  <script type="text/javascript">
    function showImg($img) {
      console.log($img)
      $img.attr("src", $img.attr("data-src"))
    }

    var Lazyload = (function() {
      function _Lazyload($target, callback) {
        this.$target = $target
        this.callback = callback
        this.start()
        this.clock
      }

      _Lazyload.prototype.start = function() {
        this.bindEvent()
        if (this.isShow(this.target)) {
          this.callback(this.target)
        }
      }

      _Lazyload.prototype.bindEvent = function() {
        var _this = this
        $(window).on("scroll", function() {
          if (_this.clock) {
            clearTimeout(_this.clock)
          }
          _this.clock = setTimeout(function() {
            if (_this.isShow(_this.$target)) {
              _this.callback(_this.$target)
            }
          }, 1000)
        })
      }

      _Lazyload.prototype.isShow = function($node) {
        var scrollTop = $(window).scrollTop()
        var windowHeight = $(window).height()
        var offsetTop = this.$target.offset().top
        nodeHeight = this.$target.height()
        if (scrollTop + windowHeight > offsetTop) {
          return true
        }
        return false
      }

      return {
        init: function($target, callback) {
          new _Lazyload($target, callback)
        }
      }
    })()

    Lazyload.init($("#hello"), function($node) {
      $node.text($node.text() + $node.text())
    })
    Lazyload.init($("#world"), function() {
      $("#world").text($("#hello").text() + $("#world").text())
    })
    // new _Lazyload($('#world'), function() {
    //   $('#world').text('hello ' + $('#world').text());
    // })

    $(".container img").each(function(index, img) {
      Lazyload.init($(img), function($img) {
        showImg($(img))
      })
    })
  </script>

</body>

</html>
